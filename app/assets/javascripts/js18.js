(function(n){function t(t){var r,i;if(n.facebox.settings.inited)return!0;n.facebox.settings.inited=!0;n(document).trigger("init.facebox");s();r=n.facebox.settings.imageTypes.join("|");n.facebox.settings.imageTypesRegexp=new RegExp("."+r+"$","i");t&&n.extend(n.facebox.settings,t);n("body").append(n.facebox.settings.faceboxHtml);i=[new Image,new Image];i[0].src=n.facebox.settings.closeImage;i[1].src=n.facebox.settings.loadingImage;n("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){i.push(new Image);i.slice(-1).src=n(this).css("background-image").replace(/url\((.+)\)/,"$1")});n("#facebox .close").click(n.facebox.close);n("#facebox .close_image").attr("src",n.facebox.settings.closeImage)}function e(){var n,t;return self.pageYOffset?(t=self.pageYOffset,n=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,n=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,n=document.body.scrollLeft),[n,t]}function o(){var n;return self.innerHeight?n=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?n=document.documentElement.clientHeight:document.body&&(n=document.body.clientHeight),n}function s(){var t=n.facebox.settings;t.loadingImage=t.loading_image||t.loadingImage;t.closeImage=t.close_image||t.closeImage;t.imageTypes=t.image_types||t.imageTypes;t.faceboxHtml=t.facebox_html||t.faceboxHtml}function i(t,i){if(t.match(/#/)){var f=window.location.href.split("#")[0],e=t.replace(f,"");n.facebox.reveal(n(e).clone().show(),i)}else t.match(n.facebox.settings.imageTypesRegexp)?r(t,i):u(t,i)}function r(t,i){var r=new Image;r.onload=function(){n.facebox.reveal('<div class="image"><img src="'+r.src+'" /><\/div>',i)};r.src=t}function u(t,i){n.get(t,function(t){n.facebox.reveal(t,i)})}function f(){return n.facebox.settings.overlay==!1||n.facebox.settings.opacity===null}function h(){if(!f())return n("facebox_overlay").length==0&&n("body").append('<div id="facebox_overlay" class="facebox_hide"><\/div>'),n("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",n.facebox.settings.opacity).click(function(){n(document).trigger("close.facebox")}).fadeIn(200),!1}function c(){if(!f())return n("#facebox_overlay").fadeOut(200,function(){n("#facebox_overlay").removeClass("facebox_overlayBG");n("#facebox_overlay").addClass("facebox_hide");n("#facebox_overlay").remove()}),!1}function l(n,t){if(n==null)return t;var i=n.toLowerCase().indexOf("#divvideo");return n.toLowerCase().indexOf("newsroom.aspx")>0&&i<0&&(t="news-room-box"),t}n.facebox=function(t,f){n.facebox.loading();t.ajax?u(t.ajax):t.image?r(t.image):t.div?i(t.div):n.isFunction(t)?t.call(n):n.facebox.reveal(t,f)};n.extend(n.facebox,{settings:{opacity:0,overlay:!0,loadingImage:"/Images/Lightbox/loading.gif",closeImage:"/Images/Lightbox/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             <\/tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="fbcontent">                 <\/div>                 <div class="fbfooter" id="faceboxCloseButton" style="display:block">                   <a href="#" class="close">                     <img src="/Images/Lightbox/closelabel.gif" title="close" class="close_image" />                   <\/a>                 <\/div>               <\/td>               <td class="b"/>             <\/tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             <\/tr>           <\/tbody>         <\/table>       <\/div>     <\/div>'},loading:function(){if(t(),n("#facebox .loading").length==1)return!0;h();n("#facebox .fbcontent").empty();n("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+n.facebox.settings.loadingImage+'"/><\/div>');n("#facebox").css({top:e()[1]+o()/10,left:385.5}).show();n(document).bind("keydown.facebox",function(t){return t.keyCode==27&&n.facebox.close(),!0});n(document).trigger("loading.facebox")},reveal:function(t,i){n(document).trigger("beforeReveal.facebox");i&&n("#facebox .fbcontent").addClass(i);n("#facebox .fbcontent").append(t);n("#facebox .loading").remove();n("#facebox .body").children().fadeIn("normal");n("#facebox").css("left",n(window).width()/2-n("#facebox table").width()/2);n(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){return n(document).trigger("close.facebox"),!1}});n.fn.facebox=function(r){function u(){n.facebox.loading(!0);var t=this.rel.match(/facebox\[?\.(\w+)\]?/);return t&&(t=t[1]),t=l(this.href,t),i(this.href,t),!1}return t(r),this.click(u)};n(document).bind("close.facebox",function(){n(document).unbind("keydown.facebox");n("#facebox").fadeOut(function(){n("#facebox .fbcontent").removeClass().addClass("fbcontent");c();n("#facebox .loading").remove()})})})(jQuery)